import java.util.Collection;
import java.util.List;

import java.io.File;

import util.ConsoleUtils;

import bakery.MagicBakery;
import bakery.CustomerOrder;
import bakery.Player;
import bakery.Layer;

import java.io.FileNotFoundException;
import java.io.IOException;

public class BakeryDriver {
    private ConsoleUtils console;

    public BakeryDriver() {
        this.console = new ConsoleUtils();
    }

    public int askActions(MagicBakery bakery) {

        String actionsType = """
                    Pick your move...could be your last
                    [1] Take an ingredient from the pantry
                    [2] Refresh pantry
                    [3] Pass an ingredient to another player

                    [4] Save the game

                    Pick your action (1 / 2 / 3 / 4) :
                """;

        String actionsTypeBake = """
                    Pick your move...could be your last
                    [1] Take an ingredient from the pantry
                    [2] Refresh pantry
                    [3] Pass an ingredient to another player
                    [4] Bake layer

                    [5] Save the game

                    Pick your action (1 / 2 / 3 / 4 / 5) :
                """;

        String actionsTypeFulfill = """
                    Pick your move...could be your last
                    [1] Take an ingredient from the pantry
                    [2] Refresh pantry
                    [3] Pass an ingredient to another player
                    [4] Fulfill order

                    [5] Save the game

                    Pick your action (1 / 2 / 3 / 4 / 5) :
                """;

        String actionsTypeBakeFulfill = """
                    Pick your move...could be your last
                    [1] Take an ingredient from the pantry
                    [2] Refresh pantry
                    [3] Pass an ingredient to another player
                    [4] Bake layer
                    [5] Fulfill order

                    [6] Save the game

                    Pick your action (1 / 2 / 3 / 4 / 5 / 6) :
                """;


        // can bake and can fulfill
        if (bakery.getBakeableLayers().size() > 0 && bakery.getFulfilableCustomers().size() > 0) {
            String input = this.console.readLine(actionsTypeBakeFulfill);

            if (input.equals("1") || input.equals("2") || input.equals("3") || input.equals("4") || input.equals("5") || input.equals("6")) {
                return Integer.parseInt(input); 
            } else {
                return 0;
            }
                

        // fulfill only
        } else if (bakery.getBakeableLayers().size() == 0 && bakery.getFulfilableCustomers().size() > 0) {
            String input = this.console.readLine(actionsTypeFulfill);

            if (input.equals("1") || input.equals("2") || input.equals("3")) {
                return Integer.parseInt(input); 
            } else if (input.equals("4") || input.equals("5")){
                return (Integer.parseInt(input) + 1);
            } else {
                return 0;
            }

        // bake only
        } else if (bakery.getBakeableLayers().size() > 0 && bakery.getFulfilableCustomers().size() == 0) {
            String input = this.console.readLine(actionsTypeBake);

            if (input.equals("1") || input.equals("2") || input.equals("3") || input.equals("4")) {
                return Integer.parseInt(input); 
            } else if (input.equals("5")) {
                return 6;
            } else {
                return 0;
            }
            
        // none
        } else {
            String input = this.console.readLine(actionsType);
            
            if (input.equals("1") || input.equals("2") || input.equals("3")) {
                return Integer.parseInt(input); 
            } else if (input.equals("4")) {
                return 6;
            } else {
                return 0;
            }
        }

    }

    public Layer bakeLayerHelper(Collection<Layer> listLayer, String layerName) {
        for (Layer layer : listLayer) {
            if (layer.toString().equals(layerName)) {
                return layer;
            }
        }
        return null;
    }

    public void gameLoad(MagicBakery magicTest, BakeryDriver bakeryDriver, ConsoleUtils console) throws InterruptedException {

        System.out.print("\033[H\033[2J"); 
        System.out.flush();
        
        do {

            while (magicTest.getActionsRemaining() > 0) {

                String bakeryName = """
                __   __  _______  _______  ___   _______    _______  _______  ___   _  _______  ______    __   __ 
                |  |_|  ||   _   ||       ||   | |       |  |  _    ||   _   ||   | | ||       ||    _ |  |  | |  |
                |       ||  |_|  ||    ___||   | |       |  | |_|   ||  |_|  ||   |_| ||    ___||   | ||  |  |_|  |
                |       ||       ||   | __ |   | |       |  |       ||       ||      _||   |___ |   |_||_ |       |
                |       ||       ||   ||  ||   | |      _|  |  _   | |       ||     |_ |    ___||    __  ||_     _|
                | ||_|| ||   _   ||   |_| ||   | |     |_   | |_|   ||   _   ||    _  ||   |___ |   |  | |  |   |  
                |_|   |_||__| |__||_______||___| |_______|  |_______||__| |__||___| |_||_______||___|  |_|  |___|  

                    """;

                System.out.println(bakeryName);

                magicTest.printGameState();

                System.out.println();
                System.out.println();
                magicTest.printCustomerServiceRecord();
                System.out.println();
                System.out.println();

                System.out.println("Current Player : " + magicTest.getCurrentPlayer() + "\n\n");
                int nextAction = bakeryDriver.askActions(magicTest);

                if (nextAction == 3) {
                    Player playerPass = console.promptForExistingPlayer("Player to be passed to : ", magicTest);
                    magicTest.passCard(console.promptForIngredient("Ingredients to be passed : ", magicTest.getCurrentPlayer().getHand()), playerPass);
                } else if (nextAction == 2) {
                    magicTest.refreshPantry();
                } else if (nextAction == 1) {
                    magicTest.drawFromPantry(console.readLine("The wanted ingredient " + magicTest.getPantry() + " : "));
                } else if (nextAction == 4) {
                    Layer bakeLayer = bakeryDriver.bakeLayerHelper(magicTest.getLayers(), console.readLine("Layer to bake " + magicTest.getBakeableLayers() + " : "));
                    if (bakeLayer != null) {
                        magicTest.bakeLayer(bakeLayer);
                        System.out.println("New hand : " + magicTest.getCurrentPlayer().getHandStr());
                    }
                } else if (nextAction == 5) {
                    CustomerOrder customer = console.promptForCustomer("Which order you would like to fulfill ? : ", magicTest.getCustomers().getActiveCustomers());
                    boolean garnish = console.promptForYesNo("Do you want to garnish");
                    magicTest.fulfillOrder(customer, garnish);
                } else if (nextAction == 6) {
                    try {
                        magicTest.saveState(console.promptForFilePath("Save location / name ? : "));
                        System.exit(0);
                    } catch (FileNotFoundException e) {
                        System.out.println("File not found uwu");
                    }        
                } else {
                    System.out.println("That is not a defined operation !! Try again.");
                }
                
                
                System.out.println();

                System.out.print("\033[H\033[2J"); 
                System.out.flush();

            }
                
        } while (magicTest.endTurn());

        System.out.print("\033[H\033[2J"); 
        System.out.flush();



        String endGame = """
            _______  _______  __   __  _______    _______  __   __  _______  ______   
            |       ||   _   ||  |_|  ||       |  |       ||  | |  ||       ||    _ |  
            |    ___||  |_|  ||       ||    ___|  |   _   ||  |_|  ||    ___||   | ||  
            |   | __ |       ||       ||   |___   |  | |  ||       ||   |___ |   |_||_ 
            |   ||  ||       ||       ||    ___|  |  |_|  ||       ||    ___||    __  |
            |   |_| ||   _   || ||_|| ||   |___   |       | |     | |   |___ |   |  | |
            |_______||__| |__||_|   |_||_______|  |_______|  |___|  |_______||___|  |_|

                """;
        
        System.out.println(endGame);
        System.out.println("Final statistics of the game\n\n");
        magicTest.printCustomerServiceRecord();
        System.out.println("Auto-close in 10 seconds...");
        Thread.sleep(1000);
        System.out.println("Auto-close in 9 seconds...");
        Thread.sleep(1000);
        System.out.println("Auto-close in 8 seconds...");
        Thread.sleep(1000);
        System.out.println("Auto-close in 7 seconds...");
        Thread.sleep(1000);
        System.out.println("Auto-close in 6 seconds...");
        Thread.sleep(1000);
        System.out.println("Auto-close in 5 seconds...");
        Thread.sleep(1000);
        System.out.println("Auto-close in 4 seconds...");
        Thread.sleep(1000);
        System.out.println("Auto-close in 3 seconds...");
        Thread.sleep(1000);
        System.out.println("Auto-close in 2 seconds...");
        Thread.sleep(1000);
        System.out.println("Auto-close in 1 seconds...");
        Thread.sleep(1000);
            
        System.exit(0);

    }

    public static void main(String[] args)  {
        
        try {

            System.out.print("\033[H\033[2J"); 
            System.out.flush();

            System.out.println("""
                ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██▒▒▒▒▒▒▒▒▒▒▒▒▒▒░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░▒▒▒▒▒▒▒▒▒▒▒▒▒▒██▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒
                ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██▒▒▒▒▒▒▒▒▒▒▒▒▒▒░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒
                ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒
                ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒
                ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒
                ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒
                ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒
                ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒
                ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒░░░░░░░░░░░░░░░░▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒
                ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒
                ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒
                ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒
                ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒
                ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒
                ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒
                ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▓▓▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒
                ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██▒▒▓▓▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒
                ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██▒▒██▒▒▓▓▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒
                ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██████░░██▓▓██▓▓▒▒▒▒▓▓▓▓▓▓██▓▓██▓▓▓▓██▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒▒▓▓▒▒▓▓▒▒▓▓▓▓▓▓▓▓▒▒██▓▓▓▓██▓▓▓▓██▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒
                ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒████▓▓██░░██▒▒▓▓██▓▓▓▓▓▓▒▒▓▓▓▓██████████████████████████▓▓▓▓██▓▓▒▒▓▓▓▓▓▓▓▓██▒▒▓▓▓▓▓▓▓▓▓▓██▓▓▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒
                ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒████▓▓██░░██▒▒▒▒██▒▒▒▒▒▒▒▒▒▒▓▓████████████████████████████▒▒██▒▒▒▒▒▒▒▒▒▒▒▒██▒▒▒▒▒▒▒▒▒▒▒▒████▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒
                ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▓▓▓▓██▓▓██░░██▒▒▒▒██▒▒▒▒▒▒▒▒▒▒██████████░░░░░░░░░░░░████████████▒▒▒▒▒▒▒▒▒▒▒▒██▒▒▒▒▒▒▒▒▒▒▒▒██▒▒██▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒
                ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▓▓▒▒▒▒██▓▓██▓▓▒▒▒▒▒▒██▒▒▒▒▒▒▒▒████████░░░░░░░░░░░░░░░░▒▒░░████████▒▒▒▒▒▒▒▒▒▒▒▒██▒▒▒▒▒▒▒▒▒▒▒▒██▒▒▒▒██▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒
                ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██▒▒▓▓██▒▒▒▒▒▒▒▒▒▒▒▒██▒▒▒▒▒▒██████░░░░░░░░░░░░░░░░░░░░░░░░░░░░██████▒▒▒▒▒▒▒▒▒▒██▒▒▒▒▒▒▒▒▒▒▒▒██▒▒▒▒██▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒
                ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██▒▒▒▒▓▓██▒▒▒▒▒▒▒▒▒▒▒▒██▒▒▒▒▒▒██▓▓░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░████▒▒▒▒▒▒▒▒▒▒██▒▒▒▒▒▒▒▒▒▒▒▒██▒▒▒▒▒▒██▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒
                ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██▒▒▒▒▒▒▓▓██▒▒▒▒▒▒▒▒▒▒▒▒██▒▒▒▒██████░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░██████▒▒▒▒▒▒▒▒██▒▒▒▒▒▒▒▒▒▒▒▒██▒▒▒▒▒▒▒▒██▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒
                ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██▒▒▒▒▒▒██████████████████████████▓▓░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░████████████████████████████████▒▒▒▒▒▒██▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒
                ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒████▒▒▒▒▒▒████▒▒▒▒▒▒▒▒▒▒▒▒██▒▒████████░░██████████░░░░░░░░██████████░░████████▒▒▒▒▒▒██▒▒▒▒▒▒▒▒▒▒▒▒████▒▒▒▒▒▒████▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒
                ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒████▒▒▒▒██▒▒██▒▒▒▒▒▒▒▒▒▒▒▒████████████░░░░██▓▓▓▓▓▓██░░░░██▓▓▓▓▓▓██░░░░██████████▒▒▒▒██▒▒▒▒▒▒▒▒▒▒▒▒██▒▒██▒▒▒▒████▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒
                ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██▒▒██▒▒██▒▒▓▓██▒▒▒▒▒▒▒▒▒▒▒▒████████████░░░░██▓▓██▓▓██░░░░██▓▓▓▓▓▓██░░░░██████████▒▒▒▒██▒▒▒▒▒▒▒▒▒▒▒▒██▒▒▒▒██▒▒██▒▒██▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒
                ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██▒▒▒▒██▒▒██▒▒▓▓██▒▒▒▒▒▒▒▒▒▒▒▒████████████░░░░  ████████░░  ██████▓▓░░░░░░██████████▒▒▒▒██▒▒▒▒▒▒▒▒▒▒▒▒██▒▒▒▒██▒▒██▒▒▒▒██▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒
                ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██▒▒▒▒████▓▓▒▒▓▓██▒▒▒▒▒▒▒▒▒▒▒▒████████████░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░██████████▒▒▒▒██▒▒▒▒▒▒▒▒▒▒▒▒██▒▒▒▒▓▓████▒▒▒▒██▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒
                ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██▓▓▒▒▒▒██▒▒▒▒▒▒▒▒██▒▒▒▒▒▒▒▒▒▒▒▒████████████▒▒░░░░░░░░░░▓▓░░░░▓▓░░░░░░░░░░▓▓██████████▒▒▒▒██▒▒▒▒▒▒▒▒▒▒▒▒██▒▒▒▒▒▒▒▒██▒▒▒▒▒▒▓▓▒▒▒▒▒▒▒▒▒▒▒▒▒▒
                ▒▒▒▒▒▒▒▒▒▒▒▒▒▒██▒▒▒▒▒▒▒▒██▒▒▒▒▒▒▓▓██▒▒▒▒▒▒▒▒▒▒▒▒████████▓▓░░░░▓▓░░░░░░  ██░░░░██░░░░░░░░▓▓░░  ████████▒▒▒▒██▒▒▒▒▒▒▒▒▒▒▒▒██▒▒▒▒▒▒▒▒██▒▒▒▒▒▒▓▓▓▓▒▒▒▒▒▒▒▒▒▒▒▒
                ▒▒▒▒▒▒▒▒▒▒▒▒▒▒██▒▒▒▒▒▒████▒▒▒▒▒▒██████████████████████████▒▒░░▓▓░░░░░░▓▓░░░░░░▒▒▓▓░░░░░░▓▓░░▓▓██████████████████████████████▒▒▒▒▒▒██▓▓▒▒▒▒▒▒▓▓▒▒▒▒▒▒▒▒▒▒▒▒
                ▒▒▒▒▒▒▒▒▒▒▒▒████▒▒▒▒▒▒████▒▒▒▒▒▒████▒▒▒▒▒▒▒▒▒▒▒▒██████████▓▓░░▓▓░░░░░░░░██░░░░▓▓░░░░░░░░▓▓  ██████████▒▒▒▒██▒▒▒▒▒▒▒▒▒▒▒▒████▒▒▒▒▒▒████▒▒▒▒▒▒████▒▒▒▒▒▒▒▒▒▒
                ▒▒▒▒▒▒▒▒▒▒▒▒████▒▒▒▒██▒▒██▒▒▒▒██▒▒██▒▒▒▒▒▒▒▒▒▒▒▒████████████▓▓░░░░██░░▓▓░░████░░▓▓░░▓▓░░░░████████████▒▒▒▒██▒▒▒▒▒▒▒▒▒▒▒▒██▒▒██▒▒▒▒██▒▒██▒▒▓▓████▒▒▒▒▒▒▒▒▒▒
                ▒▒▒▒▒▒▒▒▒▒▓▓▒▒██▒▒██▒▒▒▒██▒▒██▒▒▒▒██▒▒▒▒▒▒▒▒▒▒▒▒██████████████████░░░░▓▓▓▓▓▓▓▓▓▓▓▓░░░░████████████████▒▒▒▒██▒▒▒▒▒▒▒▒▒▒▒▒██▒▒▒▒██▒▒██▒▒▒▒██▒▒▓▓▒▒██▒▒▒▒▒▒▒▒
                ▒▒▒▒▒▒▒▒██▒▒▒▒██▒▒██▒▒▒▒██▒▒██▒▒▓▓██▒▒▒▒▒▒▒▒▒▒▒▒████████████████░░░░░░▓▓▓▓▓▓▓▓▓▓▓▓░░░░░░██████████████▒▒▒▒██▒▒▒▒▒▒▒▒▒▒▒▒██▒▒▒▒██▒▒██▒▒▓▓██▒▒██▒▒▒▒██▒▒▒▒▒▒
                ▒▒▒▒▒▒▒▒██▒▒▒▒████▒▒▒▒▒▒████▒▒▒▒▓▓██▒▒▒▒▒▒▒▒▒▒▒▒██▒▒████████▓▓████░░░░██░░░░░░░░██░░░░██▒▒▒▒████████▒▒▒▒▒▒██▒▒▒▒▒▒▒▒▒▒▒▒██▒▒▒▒▒▒████▒▒▒▒▒▒██▓▓▒▒▒▒██▒▒▒▒▒▒
                ▒▒▒▒▒▒██▒▒▒▒▒▒██▒▒▒▒▒▒▒▒██▒▒▒▒▒▒▒▒██▒▒▒▒▒▒▒▒▒▒▒▒██▒▒▒▒▒▒▒▒▒▒▒▒██▒▒██░░██░░░░░░░░██░░██▒▒▒▒▒▒██▒▒▒▒▒▒▒▒▒▒▒▒██▒▒▒▒▒▒▒▒▒▒▒▒██▒▒▒▒▒▒▒▒██▒▒▒▒▒▒▒▒██▒▒▒▒▒▒██▒▒▒▒
                ▒▒▒▒██▒▒▒▒▒▒▒▒██▒▒▒▒▒▒▒▒██▒▒▒▒▒▒████████████████████████████████████████████████████████████████████████████████████████████▒▒▒▒▒▒██▒▒▒▒▒▒▒▒▓▓▒▒▒▒▒▒▒▒██▒▒
                ▒▒▒▒██▒▒▒▒▓▓████▒▒▒▒▒▒████▒▒▒▒▒▒████▒▒▒▒▒▒▒▒▒▒▒▒██▒▒▒▒▒▒▒▒▒▒▒▒██▒▒▒▒██▓▓▓▓████▓▓▓▓██▒▒▒▒▒▒▒▒██▒▒▒▒▒▒▒▒▒▒▒▒██▒▒▒▒▒▒▒▒▒▒▒▒████▒▒▒▒▒▒████▒▒▒▒▓▓████▒▒▒▒▒▒██▒▒
                ▒▒▓▓██▒▒▒▒▒▒████▒▒▒▒▒▒████▒▒▒▒▓▓▓▓██▒▒▒▒▒▒▒▒▒▒▒▒██▒▒▒▒▓▓▓▓▓▓████▓▓▓▓██▓▓▓▓▓▓▓▓▓▓▓▓██▓▓▓▓██▓▓██▓▓██▒▒▒▒▒▒▒▒██▒▒▒▒▒▒▒▒▒▒▒▒██▓▓██▒▒▒▒████▒▒▒▒▒▒████▒▒▒▒▒▒██▓▓
                ▒▒████▒▒▓▓██▒▒██▒▒▒▒██▒▒██▒▒██▒▒▒▒██▒▒▒▒▒▒▒▒▒▒▒▒██████████████████  ██▓▓▓▓████▓▓▓▓██  ████████████████▒▒▒▒██▒▒▒▒▒▒▒▒▒▒▒▒██▒▒▒▒██▒▒██▒▒██▒▒▓▓▓▓▒▒██▒▒▒▒████
                ██▒▒██▒▒██▒▒▒▒██▒▒██▒▒▒▒██▒▒██▒▒▒▒██▒▒▒▒▒▒▒▒▒▒██████████████████████  ████    ████  ████████████████████████▒▒▒▒▒▒▒▒▒▒▒▒██▒▒▒▒██▒▒██▒▒▒▒██▒▒▓▓▒▒▒▒██▒▒██▒▒
                ▒▒▒▒██▒▒██▒▒▒▒██▒▒██▒▒▒▒████▒▒▒▒▓▓██▒▒▒▒▒▒▒▒▒▒██████████████████████  ░░░░    ░░░░  ████████████████████████▒▒▒▒▒▒▒▒▒▒▒▒██▒▒▒▒▒▒████▒▒▓▓██▓▓▓▓▒▒▒▒██▒▒██▒▒
                ▒▒▒▒██▓▓▒▒▒▒▒▒████▒▒▒▒▒▒██▒▒▒▒▒▒▓▓██████████████████████████████████▓▓            ▓▓██████████████████████████████████████▒▒▒▒▒▒▒▒██▒▒▒▒▓▓██▓▓▒▒▒▒▒▒████▒▒
                ▒▒▒▒██▒▒▒▒▒▒▒▒██▒▒▒▒▒▒▒▒██▒▒▒▒▒▒██▓▓▓▓▓▓▓▓▓▓████████████████████████████        ████████████████████████████▓▓▓▓▓▓▓▓▓▓▓▓▓▓██▒▒▒▒▒▒██▒▒▒▒▒▒▒▒██▒▒▒▒▒▒▒▒██▒▒
                ▒▒▒▒██▒▒▒▒▒▒▒▒██▒▒▒▒▒▒████▒▒▒▒▒▒██▓▓▓▓▓▓▓▓████████████████████████████████    ▓▓██████████████████████████████▓▓▓▓▓▓▓▓▓▓▓▓██▒▒▒▒▒▒████▒▒▒▒▒▒▓▓▒▒▒▒▒▒▒▒██▒▒
                ▒▒████▒▒▒▒▒▒████▒▒▒▒▒▒████▒▒▒▒██▓▓▓▓▓▓▓▓▓▓████████████████████████████████    ████████▓▓██▓▓██████████████████▓▓▓▓▓▓▓▓▓▓▓▓▓▓██▒▒▒▒████▒▒▒▒▓▓████▒▒▒▒▒▒████
                ▒▒████▒▒▒▒▓▓████▒▒▒▒██▒▒██▒▒██▓▓▓▓▓▓▓▓▓▓▓▓██████████████████████████████████████████▓▓▓▓▓▓▓▓▓▓████████████████▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓██▒▒██▒▒██▒▒▒▒████▒▒▒▒▒▒████
                ██▒▒██▒▒▓▓██▒▒██▒▒██▒▒▒▒██▒▒██▓▓▓▓▓▓▓▓▓▓████████████████████████████████████████████████████████████████████████▓▓▓▓▓▓▓▓▓▓▓▓▓▓██▒▒██▒▒▓▓██▓▓▓▓▒▒██▒▒▒▒██▒▒
                ▒▒▒▒██▓▓▓▓▒▒▒▒██▒▒██▒▒▒▒████▓▓▓▓▓▓▓▓▓▓▓▓████████████████████████████████████████████████████████████████████████▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓████▒▒▒▒██▒▒▓▓▒▒▒▒██▒▒██▒▒
                ▒▒▒▒██▒▒██▒▒▒▒██▓▓▓▓▒▒▒▒██▓▓▓▓▓▓▓▓▓▓▓▓██████████████▓▓████████████████████████████████████████████▓▓██████████████▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓██▒▒▒▒▓▓▓▓▓▓▒▒▒▒██▒▒██▒▒
                ▒▒▒▒████▒▒▒▒▒▒██▒▒▒▒▒▒▒▒████████████████████████████████████████████████████████████████████████████████████████████████████████████▒▒▒▒▒▒▓▓▓▓▒▒▒▒▒▒████▒▒
                ▒▒▒▒██▒▒▒▒▒▒▒▒██▒▒▒▒▒▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓██████████████▓▓████████████████████████████████████████████▓▓████████████████▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒▒▒▒▒▒▓▓▒▒▒▒▒▒▓▓██▒▒
                ▒▒▒▒██▒▒▒▒▒▒████▒▒▒▒▒▒██▓▓▓▓▓▓▓▓▓▓▓▓▓▓████████████▓▓▓▓████████████████████████████████████████████▓▓▓▓██████████████▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓██▒▒▒▒▒▒████▒▒▒▒▒▒██▒▒
                ▒▒████▒▒▒▒▒▒████▒▒▒▒██▓▓▓▓▓▓▓▓▓▓▓▓▓▓██████████████▓▓▓▓████████████████████████████████████████████▓▓▓▓████████████████▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒▒▒▒████▒▒▒▒▒▒████
                ▒▒████▒▒▒▒██▒▒██▒▒██▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓██████████████▓▓▓▓████████████████████████████████████████████▓▓▓▓████████████████▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓██▒▒▓▓▒▒██▒▒▒▒████
                ██▒▒██▒▒▓▓▒▒▒▒██▒▒██▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓████████████▓▓▓▓▓▓██████████████████████████████████████████████▓▓▓▓████████████▓▓██▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓██▒▒██▒▒▒▒██▒▒██▒▒
                ▒▒▒▒██▓▓██▒▒▒▒████▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓████░░░░████▓▓▓▓▓▓██████████████████████████████████████████████▓▓▓▓████▓▓░░░░░░████▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓████▒▒▒▒██▒▒██▒▒
                ▒▒▒▒████▒▒▒▒▒▒██▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓██▓▓░░░░░░░░░░██▓▓▓▓██████████████████████████████████████████████▓▓▓▓▓▓██░░░░░░░░░░██▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒▒▒▒▒▒████▒▒
                ▒▒▒▒██▒▒▒▒▒▒▒▒████████████████████▓▓░░██  ██  ██████████████████████████████████████████████████████████████▓▓░░██░░██░░██████████████████████▒▒▒▒▒▒▒▒██▒▒
                ▒▒▒▒██▒▒▒▒▒▒██▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓██▓▓░░██  ██░░██░░░░░░░░░░░░░░░░░░████████████████████████░░░░░░░░░░░░░░░░░░██░░██░░██░░██▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓██▒▒▒▒▒▒██▒▒
                ▒▒████▒▒▒▒▒▒██▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓████░░██░░██░░██░░░░░░░░░░░░░░░░░░░░░░██████████████▓▓░░░░░░░░░░░░░░░░░░░░░░██░░██░░██░░████▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓██▒▒▒▒▒▒████
                ▒▒████▒▒▓▓██▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓██▓▓████████████████████████████████░░░░░░░░████████░░░░░░░░██████████████████████████████████▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓██▒▒▒▒████
                ██▒▒██▓▓██▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓██▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓████████████████░░░░░░░░░░░░░░▒▒████████████▓▓██▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓██▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓██▒▒██▒▒
                ▒▒▒▒██▒▒██▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓██▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓████████████████████░░░░░░░░████████████████▓▓██▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓██▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓██▒▒██▒▒
                ▒▒▒▒██▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓██▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓██████████████████████▓▓▓▓▓▓▓▓████████████████▓▓▓▓██▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓██▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓████▒▒
                ▒▒▒▒██▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓██▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓████████████████████████▒▒▒▒██████████████████▓▓▓▓██▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓██▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓██▒▒
                ▒▒▒▒████████████████████████████████████████████████████████████████████████░░░░████████████████████████████████████████████████████████████████████████▒▒
                ▒▒██▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓██▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓████████████████████████░░░░██████████████████▓▓▓▓██▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓██▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓██
                ▒▒██▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓██▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓██▓▓██████████████████████░░░░██████████████████▓▓▓▓▓▓██▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓██▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓██
                
            """);

            ConsoleUtils console = new ConsoleUtils();
            BakeryDriver bakeryDriver = new BakeryDriver();

            System.out.println("""



                    I want to play a game.
                    The rules of our game have been made very clear.
                    You need to abide by those rules.
                    


                """);

            if (console.promptForStartLoad("Load existing or start new game ")) {
                List<String> playerNames = console.promptForNewPlayers("Who's playing ? (If players > 2, enter to start the game): ");
                MagicBakery magicTest = new MagicBakery(314159265, "../../io/ingredients.csv", "../../io/layers.csv");
                magicTest.startGame(playerNames, "../../io/customers.csv");

                bakeryDriver.gameLoad(magicTest, bakeryDriver, console);
            } else {
                File file = console.promptForFilePath("File name to load : ");
                MagicBakery magicLoad = MagicBakery.loadState(file);

                bakeryDriver.gameLoad(magicLoad, bakeryDriver, console);
            }
                    
        } catch (IOException e) {
            System.out.println("File not found.");
        } catch (InterruptedException e) {
            System.out.println("Game out unexpectedly.");
        } catch (ClassNotFoundException e) {
            System.out.println("Cannot load the game.");
        }

    }
}